<template name="chatOverview">
<div class="bar bar-header bar-dark">
  {{#if group}}
   <h1 class="title white-text-header">{{group}} Chat</h1>
  
   <button id="all-chats" class="button button-clear"> 
      {{> ionIcon icon="ios-arrow-back" }}
    </button>
  {{else}}
    <h1 class="title white-text-header">Global Chat</h1>
  {{/if}}

    <button class="button button-clear pull-right" data-ion-popover="_groupChats"> 
      {{> ionIcon icon="ios-people" }}
    </button>
  </div>

  {{> chatRoom}} 
</template>

<template name="chatRoom">
  {{#ionView }}
    {{#ionContent}}
    <form id="">
      <textarea type="text" name="messageBox" rows="3" maxlength="150" placeholder="{{randomMessage}}" id="messageBox"></textarea>
      <button class="col button col-100" type="submit">Send</button>
    </form>   
    {{#ionList}}
      {{#with groupMessages}}
        {{#each messages this}}
          <div data-action="message" class="message">
            {{#ionItem avatar=true id="single-message"}}
              {{#with user this.user}}
              <img src="{{chatAvatar this}}">
              <h2>{{chatUser this._id}}</h2> {{/with}}
              <p>{{{this.message}}}</p>
            {{/ionItem}}
              <div class="chat-options" style="display: none">
              <div class="col-md-25" data-action="reply">
                {{> ionIcon class="reply-icon" icon='forward'}}<br>
                Reply
              </div>
              <div class="col-md-25" data-action="react">
                <img class="reply-emoji" src="/emoji/Line/Emoji-Party-Pack_Line-01.svg"><br> 
                React
              </div>
              <div class="col-md-25" data-action="user">
                {{> ionIcon class="reply-icon" icon='ios-person'}}
                <br>
                User
              </div>
              <div class="col-md-25" data-action="close">
                {{> ionIcon class="reply-icon" icon='ios-close-outline'}}
                <br>
                Cancel
              </div>
            </div>
          </div>
        {{/each}}
      {{/with}}
    {{/ionList}} 
    {{/ionContent}}
  {{/ionView}}
</template>

<template name="_groupChats">

  {{#ionPopover}}
    {{#ionList}}
      {{#each group}}
        {{#with groupName this}}
          {{#ionItem class="group-selector" id=this._id}}
            {{groupId}}
          {{/ionItem}}
        {{else}}
          <p>No Groups :(</p>
        {{/with}}
      {{/each}}
    {{/ionList}}
  {{/ionPopover}}

</template>



