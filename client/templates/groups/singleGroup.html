<template name="singleGroup">

<!-- Standard Nav instead of the custom nav design -->
  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton path="index"}}
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title white-text-header">Group Details</h1>
  {{/contentFor}}

  {{#ionView}}
    {{#ionContent}}

    {{#with group}}
<!--       {{#if private}}
        {{#if member}}
          {{> groupData}}
        {{else}}
          <h1>This group is private and can only be seen by members</h1>
        {{/if}}       

      {{else}} -->
      {{> groupData}}

      {{> singleGroupLeaderboard groupId=this}}

      <!-- {{/if}} -->
    {{/with}}
    {{/ionContent}}
  {{/ionView}}
	
</template>

<template name="memberCheck">
	{{#if alreadyMember }}
		<button data-action="leaveGroup" id="join-toggle" class="button button-assertive">Leave</button>

    <a href="/inviteToGroup" class="invite">
      <button class="button button-balanced">
       {{> ionIcon icon='ios-upload-outline'}} Invite
      </button>
    </a>

	{{else}}
		<button data-action="joinGroup" id="join-toggle" class="button button-balanced">Join</button>
	{{/if}}
</template>

<template name="groupData">
  <div style="background: white;" class="container">        
        <img style="float:left; width: 75px;" src="{{this.avatar}}" class="circle-image">
        <div style="float:left; margin:20px">
        <h4>{{this.name}}</h4>
        ({{this.groupId}})

        <h5>Owner: 
        {{#with commissioner}}
          {{this.profile.username}}
        {{/with}}</h5>
        <h5>{{memberCount}} Members </h5>

        {{> memberCheck}}     
        </div> 
      </div>
</template>

<template name="singleGroupLeaderboard">
  {{#ionList}}
  <div style="clear:both" class="item item-divider">Group Leaderboard</div>
    <ol type="1" class="list" style="clear:both">
      
      {{#each players groupId}}
        {{#ionItem path="user.show" avatar=true}}
        <img src="{{profile.avatar}}">
        <li class="list-font">
          
          <h2 class="center-username">{{profile.username}}<span class="score">{{profile.coins}}</span></h2>
        </li>

        {{/ionItem}}
      {{/each}}
      
    </ol>

    {{/ionList}}
</template>