<template name="notifications">

	<!-- Standard Nav instead of the custom nav design -->
	{{#contentFor "headerButtonLeft"}}
    <button class="button button-clear nav-icon pull-left" data-ion-menu-toggle="left">
      {{#if isAndroid}}
        {{> ionIcon icon='android-more-vertical'}}
      {{else}}
        {{> ionIcon icon='navicon'}}
      {{/if}}
    </button>
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title white-text-header">Notifications</h1>
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
    <button style="font-size: 13px;" class="button button-clear" data-ion-menu-toggle="right">
      {{> ionIcon icon="funnel"}}
    </button>
  {{/contentFor}}

  {{#ionView}}
    {{#ionContent}}
    	{{#ionList class=notificationsList}}
	    	{{#each note in notifications}}
					{{> notification note=note}}
	    	{{/each}}
    	{{/ionList}}
    {{/ionContent}}
  {{/ionView}}
</template>

<template name="notification">
	{{#if item "group"}}
		{{> groupNotification}}
	{{/if}}
	{{#if item "mention"}}
		{{> chatNotification}}
	{{/if}}
	{{#if item "follower"}}
		{{> newFollower}}
	{{/if}}
	{{#if item "score"}}
		{{> scoreNotification}}
	{{/if}}
	{{#if item "diamonds"}}
		{{> diamondNotification}}
	{{/if}}
	{{#if item "leaderboard"}}
		{{> leaderboardNotification}}
	{{/if}}
	{{#if item "badge"}}
		{{> badgeNotification}}
	{{/if}}
	{{#if item "trophy"}}
		{{> trophyNotification}}
	{{/if}}
	{{#if item "matchupInvite"}}
		{{> matchupInvite}}
	{{/if}}
	{{#if item "matchupNotification"}}
		{{> matchupNotification}}
	{{/if}}
</template>

<template name="groupNotification">
	{{#ionItem class="double-button" buttonRight=true avatar=true }}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	    <h2>{{profile.username}}</h2>
	  {{/with}}

	  {{#with groupData note.groupId }}
	    <p>wants you to join <strong>{{name}}</strong></p>
	    <a href="/groups/{{_id}}" class="button"> 
	      {{> ionIcon icon="more"}}
	    </a>
	  {{/with}}

	  <a style="margin-right: 50px;" alt="Delete this notification" data-action="delete" class="button"> 
	    {{> ionIcon icon="plus-circled"}}
	  </a>
	{{/ionItem}}
</template>

<template name="chatNotification">
	{{#ionItem avatar=true }}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	    <h2>{{profile.username}}</h2>
	  {{/with}}
	  <p>{{note.message}}</p>
	{{/ionItem}}	
</template>

<template name="scoreNotification">
	{{#ionItem}}
		<p>You won {{note.value}} coins!</p>
	{{/ionItem}}
</template>

<template name="diamondNotification">
	{{#ionItem class="notification-has-image"}}
		<img class="notification-image" src="/diamonds.png">
		<p>{{{note.message}}}</p>
	{{/ionItem}}	
</template>

<template name="newFollower">
	{{#ionItem avatar=true}}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	   	<h2>{{profile.username}}</h2> 
	   	<p>started following you!</p>
	  {{/with}}

	{{/ionItem}}	
</template>

<template name="leaderboardNotification"></template>

<template name="badgeNotification"></template>

<template name="trophyNotification">
	{{#ionItem class="notification-has-image"}}
		{{#with trophy note.trophyId}}
			<img class="notification-image" src="/{{image}}">
			<h2>You won {{title}} place!</h2>
		{{/with}}
		{{#with game note.gameId}}
			<p>Congr{{note.message}}</p>
		{{/with}}
	{{/ionItem}}
</template>

<template name="matchupInvite"></template>

<template name="matchupNotification"></template>

<template name="templateNotification">
	{{#ionItem}}{{/ionItem}}
</template>

<template name="notificationOptions">
  <div class="chat-options">
    <div class="col-md-25" data-action="reply">
      {{> ionIcon class="reply-icon" icon='forward'}}<br>
      Reply
    </div>
    <div class="col-md-25" data-action="react">
      <img class="reply-emoji" data-ion-popover="_reactionToMessage" src="/emoji/Line/Emoji-Party-Pack_Line-01.svg"><br>
      React
    </div>
    <div class="col-md-25" data-action="user">
      {{> ionIcon class="reply-icon" icon='ios-person'}}
      <br>
      User
    </div>
    <div class="col-md-25" data-action="close">
      {{> ionIcon class="reply-icon" icon='ios-close-outline'}}
      <br>
      Cancel
    </div>
  </div>
</template>


<!-- 
		<div class="item item-divider">Followers</div>
		{{#each alert}}
			{{#if type "follower"}}	
		    {{#ionItem class="double-button" buttonRight=true avatar=true}}
		    	{{#with user referrer}}
            {{> userAvatar userId=_id}}
			      <h2>{{profile.username}}</h2>
			    	
			    	Is now following you
			      <a href="/user-profile/{{_id}}" class="button"> 
			        {{> ionIcon icon="more"}}
			      </a>
					{{/with}}
			      <a style="margin-right: 50px;" data-action="delete" class="button"> 
			        {{> ionIcon icon="ios-close"}}
			      </a>
	    	{{/ionItem}}
			{{/if}}
  	{{/each}}

	<div class="item item-divider">Trophies</div>
		{{#each alert}}
			{{#if type "trophy"}}	
		    {{#ionItem buttonRight=true class="item-thumbnail-left"}}
		    	{{#with trophy notificationId}}
					<img style="width: 66px!important;" src="/{{image}}">
		      <h2>{{title}}</h2>
		      <p>{{description}}</p>
		      {{/with}}
		      <a data-action="delete" class="button"> 
	        {{> ionIcon icon="ios-close"}}
		      </a>
	    	{{/ionItem}}
			{{/if}}
  	{{/each}} -->

<!--   	<div class="item item-divider">Score</div>
		{{#each alert}}
			{{#if type "score"}}	
		    {{#ionItem buttonRight=true}}
		      <p>{{message}}</p>
		      <a data-action="delete" class="button"> 
	        {{> ionIcon icon="ios-close"}}
		      </a>
	    	{{/ionItem}}
			{{/if}}
  	{{/each}} -->
	<!--   {{/with}}

				<br> -->
<!-- 
			<div class="item item-divider">All notifications</div>

			{{#ionItem buttonRight=true avatar=true}}
				<img src="brad.jpg">
		    <h2>John Smith</h2>
		    <p>is now following you!</p>
		    <button class="button" data-ion-popover="_notificationPopover">
		      {{> ionIcon icon="more"}}
		    </button>
    	{{/ionItem}}

			{{#ionItem buttonRight=true class="item-thumbnail-left"}}
				<img class="pickk-badge" src="san-fran.png">
	      <h2>San Fransico Badge</h2>
	      <p>You watched San Fransico play!</p>
	      <button class="button" data-ion-popover="_notificationPopover">
	        {{> ionIcon icon="more"}}
	      </button>
    	{{/ionItem}}

	    {{#ionItem buttonRight=true class="item-thumbnail-left"}}
				<img src="fire.png">
	      <h2>1% Trophy</h2>
	      <p>You ranked in the top 1% of all players!</p>
	      <button class="button" data-ion-popover="_notification">
	        {{> ionIcon icon="more"}}
	      </button>
    	{{/ionItem}} -->


<template name="gameNotifications">
	<div class="item item-divider">Game Notifications</div>
		{{#ionItem}}
				{{#each question}}
					<p>You guessed... {{_id}}</p>
				{{/each}}
    	{{/ionItem}}
</template>

<template name="type">
  {{#if type value}}
    {{> UI.contentBlock}}
  {{else}}
    {{> UI.elseBlock}}
  {{/if}}
</template>
