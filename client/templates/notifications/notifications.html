<template name="notifications">
	<!-- Standard Nav instead of the custom nav design -->
	{{#contentFor "headerButtonLeft"}}
    <button class="button button-clear nav-icon pull-left" data-ion-menu-toggle="left">
      {{#if isAndroid}}
        {{> ionIcon icon='android-more-vertical'}}
      {{else}}
        {{> ionIcon icon='navicon'}}
      {{/if}}
    </button>
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title white-text-header">Notifications</h1>
  {{/contentFor}}


<!-- Filter notifications by type.    
	{{#contentFor "headerButtonRight"}}
    <button style="font-size: 13px;" class="button button-clear" data-ion-menu-toggle="right">
      {{> ionIcon icon="funnel"}}
    </button>
  {{/contentFor}} -->

  {{#ionView}}
    {{#ionContent}}
	    {{#if noNotifications}}
				<div class="no-notifications">
					No Unread Notifications
				</div>
    	{{else}}
    		{{#ionList class=notificationsList}}
		    	{{#each note in notifications}}
						{{> notification note=note}}
		    	{{/each}}
    		{{/ionList}}
    	{{/if}}
    {{/ionContent}}
  {{/ionView}}
</template>

<template name="notification">
	{{#if notif "group"}}
		{{> groupNotification}}
	{{/if}}
	{{#if notif "mention"}}
		{{> chatNotification}}
	{{/if}}
	{{#if notif "follower"}}
		{{> newFollower}}
	{{/if}}
	{{#if notif "score"}}
		{{> scoreNotification}}
	{{/if}}
	{{#if notif "diamonds"}}
		{{> diamondNotification}}
	{{/if}}
	{{#if notif "leaderboard"}}
		{{> leaderboardNotification}}
	{{/if}}
	{{#if notif "badge"}}
		{{> badgeNotification}}
	{{/if}}
	{{#if notif "trophy"}}
		{{> trophyNotification}}
	{{/if}}
	{{#if notif "matchupInvite"}}
		{{> matchupInvite}}
	{{/if}}
	{{#if notif "matchupNotification"}}
		{{> matchupNotification}}
	{{/if}}
	{{#if item "chatReaction"}}
		{{> chatReaction}}
	{{/if}}
	
</template>

<template name="groupNotification">
	{{#ionItem avatar=true }}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	    <h2>{{profile.username}}</h2>
	  {{/with}}

	  {{#with groupData note.groupId }}
	    <p>wants you to join <strong>{{name}}</strong></p>
	  {{/with}}
	{{/ionItem}}
</template>

<template name="chatNotification">
	{{#ionItem avatar=true }}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	    <h3>{{profile.username}} Mentioned You:</h3>
	  {{/with}}
	  <p>{{note.message}}</p>
	{{/ionItem}}	
</template>

<template name="chatReaction">
	{{#ionItem avatar=true }}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	    <h3>{{profile.username}} reacted to your chat message:</h3>
	  {{/with}}
	  <p>{{note.message}}</p>
	{{/ionItem}}	
</template>

<template name="scoreNotification">
	{{#ionItem}}
		<p>You won {{note.value}} coins!</p>
	{{/ionItem}}
</template>

<template name="diamondNotification">
	{{#ionItem class="notification-has-image"}}
		<img class="notification-image" src="/diamonds.png">
		<p>{{{note.message}}}</p>
	{{/ionItem}}	
</template>

<template name="newFollower">
	{{#ionItem avatar=true}}
		{{#with user note.senderId}}
	    {{> userAvatar userId=_id}}
	   	<h2>{{profile.username}}</h2> 
	   	<p>started following you!</p>
	  {{/with}}
	{{/ionItem}}	
</template>

<template name="leaderboardNotification"></template>

<template name="badgeNotification"></template>

<template name="trophyNotification">
	{{#ionItem class="notification-has-image"}}
		{{#with trophy note.trophyId}}
			<img class="notification-image" src="/{{image}}">
			<h2>You won {{title}} place!</h2>
		{{/with}}
		{{#with game note.gameId}}
			<p>Congr{{note.message}}</p>
		{{/with}}
	{{/ionItem}}
</template>

<template name="matchupInvite"></template>

<template name="matchupNotification"></template>

<template name="templateNotification">
	{{#ionItem}}{{/ionItem}}
</template>

<template name="notificationOptions">
	{{#with options}}
		{{#if mention}}
	    <div class="{{options}} actions-section" data-action="reply">
	      {{> ionIcon class="reply-icon" icon='forward'}}<br>
	      Reply
	    </div>
	    <div class="{{options}} actions-section" data-action="react">
	      <img class="reply-emoji" data-ion-popover="_reactionToMessage" src="/emoji/Line/Emoji-Party-Pack_Line-01.svg"><br>
	      React
	  	</div>
	  {{/if}}
	  {{#if award}}
	    <div class="{{options}} actions-section" data-action="share">
	      {{> ionIcon class="reply-icon" icon='forward'}}<br>
	      Share
	    </div>
	  {{/if}}
	  {{#if group}}
			<div class="{{options}} actions-section" data-action="group">
	   		{{> ionIcon class="reply-icon" icon='ios-people'}}
	    	<br>
	    	View Group
	  	</div>
	  {{/if}}
		{{#if interaction}}
			<div class="{{options}} actions-section" data-action="user">
	   		{{> ionIcon class="reply-icon" icon='ios-person'}}
	    	<br>
	    	View User
	  	</div>
		{{/if}}

		{{#if follower}}
			{{#if notAlreadyFollowing}}
				<div class="{{options}} actions-section" data-action="follow">
	   			{{> ionIcon class="reply-icon" icon='ios-person'}}
	    		<br>
	    		Follow 
	  		</div>
	  	{{/if}}
		{{/if}}

	  <div class="{{options}} actions-section" data-action="read">
	    {{> ionIcon class="reply-icon" icon='ios-close-outline'}}
	    <br>
	    Mark Read
	  </div>
	{{/with}}
</template>

<template name="gameNotifications">
	<div class="item item-divider">Game Notifications</div>
	{{#ionItem}}
		{{#each question}}
			<p>You guessed... {{_id}}</p>
		{{/each}}
  {{/ionItem}}
</template>

<template name="type">
  {{#if type value}}
    {{> UI.contentBlock}}
  {{else}}
    {{> UI.elseBlock}}
  {{/if}}
</template>
